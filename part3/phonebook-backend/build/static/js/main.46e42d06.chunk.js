(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n(14),o=n.n(a),i=n(3),s=n(4),l=n.n(s),u="/api/persons",d=function(){return l.a.get(u).then((function(e){return e.data}))},j=function(e){return l.a.post(u,e).then((function(e){return e.data}))},b=function(e,t){return l.a.put("".concat(u,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(u,"/").concat(e)).then((function(e){return e.data}))},m=function(e){var t=e.type,n=e.value,r=e.onChange;return Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Filter shown with \ud83d\udd0e:"}),Object(c.jsx)("input",{className:"form-control",style:{width:"150px"},type:t,value:n,onChange:r})]})},f=function(e){var t=e.type,n=e.value,r=e.onChange;return Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Name \ud83d\ude0e:"}),Object(c.jsx)("input",{className:"form-control",style:{width:"250px"},type:t,value:n,onChange:r})]})},p=function(e){var t=e.type,n=e.value,r=e.onChange;return Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Phone \u260e:"}),Object(c.jsx)("input",{className:"form-control",style:{width:"250px"},type:t,value:n,onChange:r})]})},x=function(e){var t=e.type,n=e.text;return Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn btn-primary mt-2",type:t,children:n})})},O=function(e){var t=e.filter,n=e.persons,r=e.deleteName;return n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(c.jsx)("table",{className:"table table-hover",style:{maxWidth:"650px"},children:Object(c.jsx)("tbody",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{style:{minWidth:"200px"},children:e.name}),Object(c.jsx)("td",{style:{minWidth:"200px"},children:e.number}),Object(c.jsx)("td",{style:{minWidth:"200px"},children:Object(c.jsx)("button",{className:"btn btn-outline-success btn-sm ml-2",type:"button",value:e.id,onClick:r,children:"delete"})})]})})},e.id)}))},v=function(e){var t=e.message,n=e.messageType;return null===t?null:Object(c.jsx)("div",{className:n,children:t})},y=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(""),s=Object(i.a)(o,2),l=s[0],u=s[1],y=Object(r.useState)(""),g=Object(i.a)(y,2),w=g[0],N=g[1],C=Object(r.useState)(""),k=Object(i.a)(C,2),S=k[0],T=k[1],W=Object(r.useState)(null),D=Object(i.a)(W,2),J=D[0],P=D[1],A=Object(r.useState)(null),E=Object(i.a)(A,2),I=E[0],L=E[1];Object(r.useEffect)((function(){d().then((function(e){a(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(v,{message:J,messageType:I}),Object(c.jsx)("div",{children:Object(c.jsx)(m,{type:"text",value:S,onChange:function(e){T(e.target.value)}})}),Object(c.jsx)("h1",{children:"Add a new number"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===l}));if("undefined"===typeof t||t.number===w)return"undefined"!==typeof t?(u(""),N(""),L("error"),P("".concat(l," is already added to phonebook")),void setTimeout((function(){P(null),L(null)}),5e3)):void j({name:l,number:w}).then((function(e){a(n.concat(e)),u(""),N(""),L("verification"),P("Added ".concat(e.name)),setTimeout((function(){P(null),L(null)}),5e3)})).catch((function(e){L("error"),P("".concat(JSON.stringify(e.response.data))),setTimeout((function(){P(null),L("error")}),5e3)}));window.confirm("".concat(t.name," is already added to phonebook, replace the old number with a new one?"))&&b(t.id,{name:t.name,number:w}).then((function(e){a(n.map((function(n){return n.id!==t.id?n:e}))),L("verification"),P("The old number ".concat(t.name," replaced with a new one ")),setTimeout((function(){P(null),L(null)}),5e3),u(""),N("")}))},children:[Object(c.jsx)(f,{type:"text",value:l,onChange:function(e){u(e.target.value)}}),Object(c.jsx)(p,{type:"text",value:w,onChange:function(e){N(e.target.value)}}),Object(c.jsx)(x,{type:"submit",text:"add"})]}),Object(c.jsx)("h1",{children:"Numbers"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("table",{className:"table table-hover",style:{maxWidth:"650px"},children:Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",style:{minWidth:"200px"},children:"Name"}),Object(c.jsx)("th",{scope:"col",style:{minWidth:"200px"},children:"Phone"}),Object(c.jsx)("th",{scope:"col",style:{minWidth:"200px"},children:"Delete"})]})})}),Object(c.jsx)(O,{filter:S,persons:n,deleteName:function(e){e.preventDefault();var t=n.find((function(t){return t.id===e.target.value})),c=t.id,r=t.name;window.confirm("Delete ".concat(r," ?"))&&(h(c).catch((function(e){L("error"),P("Information of ".concat(r," has already been removed from server")),setTimeout((function(){P(null),L("error")}),5e3),a(n.filter((function(e){return e.id!==c})))})),a(n.filter((function(e){return e.id!==c}))))}})]})]})};n(37);o.a.render(Object(c.jsx)(y,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.46e42d06.chunk.js.map